
export DEV_WEBAPP_BUCKET=red-comet-webapp-dev
export DEV_WEBAPP_LOG_BUCKET=red-comet-webapp-logs-dev

export PROD_WEBAPP_BUCKET=red-comet-webapp-prod
export PROD_WEBAPP_LOG_BUCKET=red-comet-webapp-logs-prod

// Create bucket for cfn templates
aws s3api create-bucket --bucket red-comet-cfn-templates --region us-east-1 --profile rc_zac

// Empty and delete cfn template bucket
aws s3 rb s3://red-comet-cfn-templates --force 

// Sync Infrastructure files to S3 Bucket
aws s3 sync \
./infrastructure s3://red-comet-cfn-templates \
--exclude "*" \
--include "*.yml" \
--region us-east-1 \
--profile rc_zac

// Copy web app files to S3
aws s3 sync \
./web-app s3://red-comet-webapp-dev \
--region us-east-1 \
--profile rc_zac

// Copy web admin files to S3
aws s3 sync \
./web-admin s3://red-comet-webadmin-dev \
--region us-east-1 \
--profile rc_zac

// Deploy Red Comet Stack
aws cloudformation deploy \
--stack-name RedComet-DEV \
--template-file ./infrastructure/root.yml \
--parameter-overrides \
    Environment=DEV \
    TemplatePath=https://red-comet-cfn-templates.s3.amazonaws.com \
--region us-east-1 \
--profile rc_zac



WARNING: PROD DEPLOY SCRIPTS!!!!!!!!

// Copy web app files to S3
aws s3 sync \
./web-app s3://red-comet-webapp-prod \
--region us-east-1 \
--profile rc_zac

// Copy web admin files to S3
aws s3 sync \
./web-admin s3://red-comet-webadmin-prod \
--region us-east-1 \
--profile rc_zac

// Deploy Red Comet Stack
aws cloudformation deploy \
--stack-name RedComet-PROD \
--template-file ./infrastructure/root.yml \
--parameter-overrides \
    Environment=PROD \
    TemplatePath=https://red-comet-cfn-templates.s3.amazonaws.com \
--region us-east-1 \
--profile rc_zac
